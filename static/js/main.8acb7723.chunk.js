(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{19:function(t,e,a){},26:function(t,e,a){},36:function(t,e,a){},39:function(t,e,a){},48:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),i=a(28),c=a.n(i),s=(a(36),a(5)),o=a(6),u=a(8),l=a(7),d=a(15),j=a(4),h=a(2),b=a.n(h),p=a(3),m=a(23),f="user",O=function(t){return localStorage.setItem(f,JSON.stringify(t))},v=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},x=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(f));null===e&&(e={}),v(e)(t)}))},g=function(t){return new Promise((function(e){O(Object(m.a)(Object(m.a)({},{name:"",email:"",image:"",description:""}),t)),v("OK")(e)}))},k=function(t){return new Promise((function(e){O(Object(m.a)({},t)),v("OK")(e)}))},y=(a(19),a(0)),S=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(y.jsx)("p",{className:"loading",children:"Carregando..."})}}]),a}(r.a.Component),N=S,w=(a(39),function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).nome=function(e){t.setState({input:e.target.value},t.habilitar)},t.habilitar=function(){return t.state.input.length>2?t.setState({habilitado:!1}):t.setState({habilitado:!0})},t.log=Object(p.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.input,n=t.props.history.push,t.setState({loading:!0}),e.next=5,g({name:a});case 5:return e.abrupt("return",n("/search"));case 6:case"end":return e.stop()}}),e)}))),t.state={input:"",habilitado:!0,loading:!1},t}return Object(o.a)(a,[{key:"render",value:function(){var t=this,e=this.state,a=e.habilitado,n=e.loading;return Object(y.jsx)("div",{className:"login","data-testid":"page-login",children:Object(y.jsxs)("form",{className:"formLogin",children:[n&&Object(y.jsx)(N,{}),Object(y.jsxs)("label",{htmlFor:"login",children:["Nome:",Object(y.jsx)("input",{className:"input",name:"input",type:"text","data-testid":"login-name-input",placeholder:"Nome de usuario",onChange:function(e){return t.nome(e)}})]}),Object(y.jsx)("button",{className:"loginButon",disabled:a,type:"button","data-testid":"login-submit-button",onClick:this.log,children:"Entrar"})]})})}}]),a}(r.a.Component)),C=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).user=Object(p.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:a=e.sent,t.setState({msg:!1,user:a.name});case 4:case"end":return e.stop()}}),e)}))),t.state={msg:!1,user:""},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({msg:!0}),this.user()}},{key:"render",value:function(){var t=this.state,e=t.msg,a=t.user;return Object(y.jsxs)("header",{"data-testid":"header-component",children:[e&&Object(y.jsx)(N,{}),Object(y.jsx)("p",{"data-testid":"header-user-name",className:"headerNome",children:a}),Object(y.jsx)("nav",{children:Object(y.jsxs)("ul",{className:"ul",children:[Object(y.jsx)("li",{children:Object(y.jsx)(d.b,{className:"links","data-testid":"link-to-search",to:"/search",children:"Pesquisar"})}),Object(y.jsx)("li",{children:Object(y.jsx)(d.b,{className:"links","data-testid":"link-to-favorites",to:"/favorites",children:"Favoritos"})}),Object(y.jsx)("li",{children:Object(y.jsx)(d.b,{className:"links","data-testid":"link-to-profile",to:"/profile",children:"Perfil"})})]})})]})}}]),a}(r.a.Component),I=function(){var t=Object(p.a)(b.a.mark((function t(e){var a,n,r,i,c,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=encodeURI(e).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),t.next=4,fetch(n);case 4:return r=t.sent,t.next=7,r.json();case 7:return i=t.sent,c=i.results,s=c.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=I,P=(a(26),function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).input=function(e){t.setState({input:e},t.activeB)},t.activeB=function(){return t.state.input.length>1?t.setState({botao:!1}):t.setState({botao:!0})},t.limpar=Object(p.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.input,t.setState({mostrar:!1,loading:!0}),e.next=4,M(a);case 4:n=e.sent,t.setState({mostrar:!0,loading:!1,result:!0,musicas:n});case 6:case"end":return e.stop()}}),e)}))),t.form=function(){var e=t.state,a=e.mostrar,n=e.botao,r=e.input;if(a)return Object(y.jsxs)("form",{children:[Object(y.jsx)("input",{type:"text","data-testid":"search-artist-input",onChange:function(e){return t.input(e.target.value)},placeholder:"Nome do artista"}),Object(y.jsx)("button",{"data-testid":"search-artist-button",type:"submit",disabled:n,value:r,onClick:t.limpar,children:"Pesquisar"})]})},t.array=function(){var e=t.state.musicas;return Object(y.jsx)("div",{className:"musicas",children:e.map((function(t,e){return Object(y.jsxs)("div",{className:"musica",children:[Object(y.jsx)("p",{children:e}),Object(y.jsx)("img",{src:t.artworkUrl100,alt:t.artistName}),Object(y.jsx)("p",{children:Object(y.jsx)("b",{children:t.collectionName})}),Object(y.jsx)("p",{children:t.artistName}),Object(y.jsx)("p",{children:t.releaseDate}),Object(y.jsx)(d.b,{className:"id","data-testid":"link-to-album-".concat(t.collectionId),to:"/album/".concat(t.collectionId),children:"Musicas"})]},e)}))})},t.resultado=function(){var e=t.state,a=e.input,n=e.musicas;return Object(y.jsxs)("div",{children:[Object(y.jsxs)("p",{children:["Resultado de \xe1lbuns de:"," ",a]}),0===n.length?"Nenhum \xe1lbum foi encontrado":t.array()]})},t.state={botao:!0,input:"",mostrar:!0,loading:!1,result:!1},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.form()}},{key:"render",value:function(){var t=this.state,e=t.mostrar,a=t.loading,n=t.result;return Object(y.jsxs)("div",{"data-testid":"page-search",children:[Object(y.jsx)(C,{}),e&&this.form(),a&&Object(y.jsx)(N,{}),n&&this.resultado()]})}}]),a}(r.a.Component)),D=a(31),F=a(11),J=a(10),U=function(){var t=Object(p.a)(b.a.mark((function t(e){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return a=t.sent,t.next=5,a.json();case 5:return n=t.sent,t.abrupt("return",n.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=U,B="favorite_songs";JSON.parse(localStorage.getItem(B))||localStorage.setItem(B,JSON.stringify([]));var K=function(){return JSON.parse(localStorage.getItem(B))},T=function(t){return localStorage.setItem(B,JSON.stringify(t))},q=function(t){return function(e){setTimeout((function(){e(t)}),500)}},A=function(){return new Promise((function(t){var e=K();q(e)(t)}))},R=function(t){return new Promise((function(e){if(t){var a=K();T([].concat(Object(F.a)(a),[t]))}q("OK")(e)}))},L=function(t){return new Promise((function(e){var a=K();T(a.filter((function(e){return e.trackId!==t.trackId}))),q("OK")(e)}))},_=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).music=t.music.bind(Object(J.a)(t)),t.MusicCard=t.MusicCard.bind(Object(J.a)(t)),t.favoriteS=t.favoriteS.bind(Object(J.a)(t)),t.getSongs=t.getSongs.bind(Object(J.a)(t)),t.state={musicas:"",musics:[],filtro:[],cheker:[],delay:!1},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.music(),this.getSongs()}},{key:"getSongs",value:function(){var t=Object(p.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({delay:!1}),t.next=3,A();case 3:e=t.sent,this.setState((function(t){return{musicas:[].concat(Object(F.a)(t.musicas),Object(F.a)(e)),cheker:Object(F.a)(e.map((function(t){return t.trackId}))),delay:!1}}),this.favoriteS);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"music",value:function(){var t=Object(p.a)(b.a.mark((function t(){var e,a,n,r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.id,t.next=3,E(e);case 3:a=t.sent,n=Object(D.a)(a),r=n[0],i=n.slice(1),this.setState({filtro:r,musics:i});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"favoriteS",value:function(){var t=Object(p.a)(b.a.mark((function t(e,a,n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==n){t.next=7;break}return this.setState({delay:!0}),t.next=4,L(e);case 4:this.setState((function(t){return{delay:!1,cheker:Object(F.a)(t.cheker.filter((function(t){return t!==a})))}})),t.next=11;break;case 7:return this.setState((function(t){return{cheker:[].concat(Object(F.a)(t.cheker),[a]),delay:!0}})),t.next=10,R(e);case 10:this.setState({delay:!1});case 11:case"end":return t.stop()}}),t,this)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"MusicCard",value:function(){var t=this,e=this.state,a=e.musics,n=e.filtro,r=e.cheker;if(a.length>0)return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"album",children:[Object(y.jsx)("img",{src:n.artworkUrl100,alt:n.artistName}),Object(y.jsx)("p",{"data-testid":"artist-name",children:n.artistName}),Object(y.jsx)("p",{"data-testid":"album-name",children:n.collectionName})]}),Object(y.jsx)("div",{className:"musicas",children:a.map((function(e,n){return Object(y.jsxs)("div",{className:"audio",children:[Object(y.jsxs)("label",{htmlFor:"favorita",children:["Favorita"," ",Object(y.jsx)("input",{"data-testid":"checkbox-music-".concat(e.trackId),type:"checkbox",checked:r.includes(e.trackId),onChange:function(r){return t.favoriteS(a[n],e.trackId,r.target.checked)}})]}),Object(y.jsx)("p",{children:e.trackName}),Object(y.jsx)("audio",{"data-testid":"audio-component",src:e.previewUrl,controls:!0,children:Object(y.jsx)("track",{kind:"captions"})})]},n)}))})]})}},{key:"render",value:function(){var t=this.state.delay;return Object(y.jsxs)("div",{"data-testid":"page-album",children:[Object(y.jsx)(C,{}),t?Object(y.jsx)(N,{}):this.MusicCard()]})}}]),a}(r.a.Component),z=_,G=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).MusicCard=t.MusicCard.bind(Object(J.a)(t)),t.favoriteS=t.favoriteS.bind(Object(J.a)(t)),t.getSongs=t.getSongs.bind(Object(J.a)(t)),t.state={musicas:"",cheker:[],delay:!1},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getSongs()}},{key:"getSongs",value:function(){var t=Object(p.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({delay:!1}),t.next=3,A();case 3:e=t.sent,this.setState((function(t){return{musicas:[].concat(Object(F.a)(t.musicas),Object(F.a)(e)),cheker:Object(F.a)(e.map((function(t){return t.trackId}))),delay:!1}}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"favoriteS",value:function(){var t=Object(p.a)(b.a.mark((function t(e,a,n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==n){t.next=5;break}return this.setState({delay:!0}),t.next=4,L(e);case 4:this.setState((function(t){return{delay:!1,cheker:Object(F.a)(t.cheker.filter((function(t){return t!==a}))),musicas:Object(F.a)(t.musicas.filter((function(t){return t.trackId!==a})))}}));case 5:case"end":return t.stop()}}),t,this)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"MusicCard",value:function(){var t=this,e=this.state,a=e.musicas,n=e.cheker;if(a.length>0)return Object(y.jsx)("div",{className:"musicas",children:a.map((function(e,r){return Object(y.jsxs)("div",{className:"audio",children:[Object(y.jsxs)("label",{htmlFor:"Favorita",children:["Favorita"," ",Object(y.jsx)("input",{id:"Favorita","data-testid":"checkbox-music-".concat(e.trackId),type:"checkbox",checked:n.includes(e.trackId),onChange:function(n){return t.favoriteS(a[r],e.trackId,n.target.checked)}})]}),Object(y.jsx)("p",{children:e.trackName}),Object(y.jsx)("audio",{"data-testid":"audio-component",src:e.previewUrl,controls:!0,children:Object(y.jsx)("track",{kind:"captions"})})]},e.trackId)}))})}},{key:"render",value:function(){var t=this.state.delay;return Object(y.jsxs)("div",{"data-testid":"page-favorites",children:[Object(y.jsx)(C,{}),t?Object(y.jsx)(N,{}):this.MusicCard()]})}}]),a}(r.a.Component),H=G,Q=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).perfil=t.perfil.bind(Object(J.a)(t)),t.state={loading:!1,nome:"",email:"",image:"",description:""},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.perfil()}},{key:"perfil",value:function(){var t=Object(p.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.next=3,x();case 3:e=t.sent,this.setState({loading:!1,nome:e.name,email:e.email,image:e.image,description:e.description});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.loading,a=t.nome,n=t.email,r=t.image,i=t.description;return Object(y.jsxs)("div",{"data-testid":"page-profile",children:[Object(y.jsx)(C,{}),e&&Object(y.jsx)(N,{}),Object(y.jsxs)("div",{className:"perfil",children:[Object(y.jsx)("img",{src:r,alt:"foto",className:"foto","data-testid":"profile-image"}),Object(y.jsx)(d.b,{to:"/profile/edit",className:"link",children:"Editar perfil"}),Object(y.jsx)("p",{children:a}),Object(y.jsx)("p",{children:n}),Object(y.jsx)("p",{children:i})]})]})}}]),a}(r.a.Component),V=Q,W=a(20),X=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).editar=t.editar.bind(Object(J.a)(t)),t.habilitar=t.habilitar.bind(Object(J.a)(t)),t.salvar=t.salvar.bind(Object(J.a)(t)),t.state={load:!1,botao:!0,name:"",email:"",description:"",image:""},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.editar()}},{key:"editar",value:function(){var t=Object(p.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({load:!0}),t.next=3,x();case 3:e=t.sent,this.setState({load:!1,name:e.name,email:e.email,description:e.description,image:e.image});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"input",value:function(t){this.setState(Object(W.a)({},t.target.name,t.target.value),this.habilitar)}},{key:"salvar",value:function(){var t=Object(p.a)(b.a.mark((function t(){var e,a,n,r,i,c,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state,a=e.name,n=e.email,r=e.image,i=e.description,c={name:a,email:n,image:r,description:i},s=this.props.history.push,this.setState({load:!0}),t.next=6,k(c);case 6:return t.abrupt("return",s("/profile"));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"habilitar",value:function(){var t=this.state,e=t.name,a=t.email,n=t.description,r=t.image;e.length>0&&a.length>0&&n.length>0&&r.length>0?this.setState({botao:!1}):this.setState({botao:!0})}},{key:"render",value:function(){var t=this,e=this.state,a=e.load,n=e.name,r=e.email,i=e.description,c=e.botao,s=e.image;return Object(y.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(y.jsx)(C,{}),a?Object(y.jsx)(N,{}):Object(y.jsxs)("form",{className:"edit",children:[Object(y.jsx)("h3",{children:"Editar perfil"}),Object(y.jsx)("input",{value:n,name:"name",type:"text","data-testid":"edit-input-name",placeholder:"nome",onChange:function(e){return t.input(e)}}),Object(y.jsx)("input",{value:r,name:"email",type:"email","data-testid":"edit-input-email",placeholder:"Email",onChange:function(e){return t.input(e)}}),Object(y.jsx)("textarea",{value:i,cols:"18",rows:"10",name:"description",type:"text","data-testid":"edit-input-description",onChange:function(e){return t.input(e)},placeholder:"descricao"}),Object(y.jsx)("input",{value:s,name:"image",type:"text",placeholder:"Url da imagem","data-testid":"edit-input-image",onChange:function(e){return t.input(e)}}),Object(y.jsx)("button",{"data-testid":"edit-button-save",type:"button",disabled:c,onClick:this.salvar,children:"Salvar"})]})]})}}]),a}(r.a.Component),Y=X,Z=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{"data-testid":"page-not-found"}),Object(y.jsx)("p",{children:"Pagina nao encontrada: 404"})]})}}]),a}(r.a.Component),$=Z,tt=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(y.jsx)(d.a,{children:Object(y.jsxs)(j.c,{children:[Object(y.jsx)(j.a,{exact:!0,path:"/",component:w}),Object(y.jsx)(j.a,{path:"/search",component:P}),Object(y.jsx)(j.a,{path:"/album/:id",component:z}),Object(y.jsx)(j.a,{exact:!0,path:"/favorites",component:H}),Object(y.jsx)(j.a,{path:"/profile/edit",component:Y}),Object(y.jsx)(j.a,{path:"/profile",component:V}),Object(y.jsx)(j.a,{path:"*",component:$})]})})}}]),a}(r.a.Component),et=tt;c.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(et,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.8acb7723.chunk.js.map